var g=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var O=(n,e)=>{for(var f in e)g(n,f,{get:e[f],enumerable:!0})},k=(n,e,f,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of V(e))!x.call(n,u)&&u!==f&&g(n,u,{get:()=>e[u],enumerable:!(c=N(e,u))||c.enumerable});return n};var F=n=>k(g({},"__esModule",{value:!0}),n);var S={};O(S,{default:()=>K});module.exports=F(S);var a=require("fs");function K(n,e){if(!(0,a.existsSync)(`${n}/${e}`))throw new Error(`File ${n}/${e} doesnt exist`);let f=(0,a.readFileSync)(`${n}/${e}`,{encoding:"utf-8"});f=f.replace(/#.*/g,"");let c=f.replace(/\r/g,"").split(`
`),u={},i={},s;for(let d of c){if(/^\[include\s(.*\.cfg)\]$/g.test(d)){let t=d.split(" ")[1].replace("]",""),o=this.parseConfig(n,t);b(u,o);continue}let m=d.match(/^\[webcam.*\]$/g);if(m){let t=m[0].replace(/\[|\]/g,"").split(" ");t.length<2&&(t[1]="default"),u[t[0]]===void 0&&(u[t[0]]={}),i={},u[t[0]][t[1]]=i;continue}let y=d.match(/^\[([^\]]+)\]$/);if(y){i[s]!==void 0&&i[s].length===0&&(i[s]=void 0),s=void 0;let t=y[1];i={},u[t]=i;continue}let r=d.match(/^([^;][^:]*):(.*)$/);if(r){let t=r[1].trim();if(r[2].trim()===""){s=r[1],i[r[1]]=[];continue}let o=p(r[2].trim());if(t.match(/[0-9]+_/g)){let $=Number(t.match(/[0-9]+/g))-1,l=t.replace(/[0-9]+/g,"").split("_"),j=l[0],w=l[1];i[j]===void 0&&(i[j]=[]),i[l[0]][$]===void 0?i[l[0]].push({[w]:o}):i[l[0]][$][w]=o;continue}if(t.startsWith("- {")&&i[s]!==void 0){o=p(`${t}:${r[2].trim()}`),i[s].push(o);continue}if(t.startsWith("- ")&&i[s]!==void 0){i[s].push({key:t.substring(2),value:o});continue}i[s]!==void 0&&i[s].length===0&&(i[s]=void 0),s=void 0,i[r[1]]=o;continue}if(s!==void 0&&i[s]!==void 0){let t=p(d.trim());if(t===void 0||t.length===0)continue;i[s].push(t)}i[s]!==void 0&&i[s].length===0&&(i[s]=void 0)}return u}function b(n,...e){if(!e.length)return n;let f=e.shift();if(h(n)&&h(f))for(let c in f)h(f[c])?(n[c]||Object.assign(n,{[c]:{}}),b(n[c],f[c])):Object.assign(n,{[c]:f[c]});return b(n,...e)}function p(n){let e=n;if(e==="")return;e.startsWith("- ")&&(e=e.substring(2));let f=Number(n);return isNaN(f)||(e=f),e==="true"&&(e=!0),e==="false"&&(e=!1),typeof e=="string"&&e.match(/^\{.*\}/g)&&(e=JSON.parse(e)),typeof e=="string"&&(e=e.replace(/\'/g,"")),e}function h(n){return n&&typeof n=="object"&&!Array.isArray(n)}
